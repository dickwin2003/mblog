(self.webpackChunk_ice_lite_scaffold=self.webpackChunk_ice_lite_scaffold||[]).push([[804],{3265:function(){},9136:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return G}});var n,r,a=i(5177),o=i(1060),c=i(7174),s=i(1739),l=i(4885),f=i(813);function m(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var d=i(1543),u=i(5033),g=i(3736),h=i(2483),p=i(8037),v=function(e,t){return null==t?e:"".concat(e,"=").concat(encodeURIComponent(String(t)))},b=function(e){var t=function(t){if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];Array.isArray(n)?i.push.apply(i,(0,p._)(n.map(function(e){return v(t,e)}))):i.push(v(t,n))}},i=[];for(var n in e)t(n);return i.join("&")},_={targetId:"alibaba-login-iframe",iframeUrl:"https://passport.alipay.com/littleLogin/littleLogin.htm",appName:"4",appEntrance:"default",lang:"zh_CN",styleType:"vertical",bizParams:"",queryStr:"",iframeWidth:250,iframeHeight:250,notLoadSsoView:!1,notKeepLogin:!1,isMobile:!1},y={largePageUrl:"",largePageJumpType:"redirect",useLargePage:!1},w={OPEN_URL_BY_REDIRECT:"redirect",OPEN_URL_BY_REPLACE:"replace",OPEN_NEW_TAB:"newTab"},I="alibaba-login-box",k=["_sys_pop_login_success_cb_20141106"],E=function(e){return"string"==typeof e?document.getElementById(e):e},C=function(e,t){m(e,HTMLElement)&&e.classList.add(t)},S=function(e,t){m(e,HTMLElement)&&e.classList.remove(t)},O=function(e){var t=document.createElement("iframe");t.id=I;var i=E(e.targetId),n=e.lang,r=e.appName,a=e.appEntrance,o=e.styleType,c=e.bizParams,s=e.notLoadSsoView,l=e.notKeepLogin,f=e.isMobile,m="havana_xxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),d=e.loginId,u="".concat(e.iframeUrl).concat(e.iframeUrl.indexOf("?")>-1?"&":"?"),g={lang:n,appName:r,appEntrance:a,styleType:o,bizParams:c,notLoadSsoView:s,notKeepLogin:l,isMobile:f,iframeUUID:m};d&&(g.loginId=d);var h=u+b(g)+e.queryStr+"&rnd="+Math.random();return t.sandbox="allow-same-origin allow-scripts allow-top-navigation allow-top-navigation-by-user-activation allow-popups allow-forms allow-modals allow-storage-access-by-user-activation allow-downloads allow-popups-to-escape-sandbox",t.src=h,t.width=String(e.iframeWidth),t.height=String(e.iframeHeight),t.style.border="none",t.scrolling="no",t.addEventListener("load",function(){C(i,"iframe-loaded")}),i.appendChild(t),{target:i,iframe:t,iframeUrl:h,iframeUUID:m}},P="havana-detect-third-party-cookie-iframe-id",L=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),U=function(){var e=/Chrome\/(\d{1,3})\./.exec(navigator.userAgent);return(null==e?void 0:e[1])&&Number(e[1])>=118},j=function(e){var t=e.largePageUrl;switch(e.largePageJumpType){case w.OPEN_URL_BY_REDIRECT:window.location.href=t;break;case w.OPEN_URL_BY_REPLACE:location.replace(t);break;case w.OPEN_NEW_TAB:window.open(t)}},T=function(){var e=document.getElementById(P);e&&document.body.removeChild(e)},R=function(e){return L?Promise.resolve({banThirdPartyCookie:!0}):U()?new Promise(function(t){var i=function(n){var r=null==n?void 0:n.data;if("object"!=typeof r)try{r=JSON.parse(decodeURIComponent(r))}catch(e){return}var a=null==r?void 0:r.type;a&&"DETECT_THIRD_PARTY_COOKIE"===a&&(T(),window.removeEventListener("message",i,!1),r.content&&(e.largePageUrl?j(e):t({banThirdPartyCookie:!0})),t({banThirdPartyCookie:!1}))};window.addEventListener("message",i,!1),T();var n=document.createElement("iframe");n.id=P,n.src="https://main.m.tmall.com/app/vip/h5-webapp/third-party-cookie.html",n.style.display="none",document.body.appendChild(n),setTimeout(function(){T(),window.removeEventListener("message",i,!1),t({errorCode:"timeOut"})},2e3)}):Promise.resolve({banThirdPartyCookie:!1})},x=function(){function e(t){(0,d._)(this,e),(0,g._)(this,"config",_),(0,g._)(this,"largePageConfig",y),(0,g._)(this,"iframeObj",void 0),(0,g._)(this,"listeners",{}),(0,g._)(this,"bakStyle",{originalIframeWidth:0,originalIframeHeight:0,bakOriginalIframeWidth:!1}),this.config=(0,h._)({},this.config,t),this.iframeObj={target:null,iframe:null,iframeUrl:null}}return(0,u._)(e,[{key:"fireEvent",value:function(e,t){this.listeners[e]&&this.listeners[e](t)}},{key:"checkOnlyIframe",value:function(){if(this.iframeObj&&this.iframeObj.iframeUUID)return!1;var e=E(I);return!e||"IFRAME"!==e.tagName}},{key:"removeListener",value:function(){var e=this;window.removeEventListener&&window.removeEventListener("message",function(t){e.messageHandler(t)}),this.listeners={}}},{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;if(!this.checkOnlyIframe()){console.error("\u91CD\u590D\u5B9A\u4E49iframe");return}this.config=Object.assign({},this.config,e),this.iframeObj=O(this.config),this.fireEvent("afterRenderIframe",{iframe:this.iframeObj.iframe}),window.postMessage&&window.addEventListener("message",function(e){t.messageHandler(e)}),this.fireEvent("onInit",{_self:this})}},{key:"checkThirdPartyCookie",value:function(){return new Promise(function(e){R({}).then(function(t){e(t)})})}},{key:"useLargePage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;return(this.largePageConfig=Object.assign({},this.largePageConfig,e),this.largePageConfig.useLargePage&&this.largePageConfig.largePageUrl)?new Promise(function(e,i){R(t.largePageConfig).then(function(t){e(t)})}):Promise.resolve({errorCode:"paramsError"})}},{key:"checkMessage",value:function(e){var t=!1;try{k.forEach(function(i){e.indexOf(i)>-1&&(t=!0)})}catch(e){return!1}return t}},{key:"messageHandler",value:function(e){var t,i=this.config,n=this.iframeObj;try{t="string"==typeof(null==e?void 0:e.data)&&e.data.indexOf("action")>-1?JSON.parse(decodeURIComponent(e.data)):"object"==typeof e.data&&e.data.action?e.data:{}}catch(e){t={}}var r=t.iframeUUID,a=t.showIframe,o=t.hideIframe,c=t.action;if(!r||r===this.iframeObj.iframeUUID){switch(a&&("visible"!==n.iframe.style.visibility&&(n.iframe.style.visibility="visible"),this.fireEvent("onIframeShow",{_self:n.iframe}),C(n.target,"iframe-show")),o&&("hidden"!==n.iframe.style.visibility&&(n.iframe.style.visibility="hidden"),this.fireEvent("onIframeHide",{_self:n.iframe}),S(n.target,"iframe-show")),c){case"resizeIframe":if(0===n.iframe.offsetHeight)return;i.resizeIframeWidthFix||(n.iframe.width=t.width),i.resizeIframeHeightFix||(n.iframe.height=t.height),this.bakStyle.bakOriginalIframeWidth||(i.resizeIframeWidthFix||(this.bakStyle.originalIframeWidth=t.width),i.resizeIframeHeightFix||(this.bakStyle.originalIframeHeight=t.height),this.bakStyle.bakOriginalIframeWidth=!0);break;case"refreshIframe":this.iframeObj.iframe&&(this.iframeObj.iframe.src=this.iframeObj.iframeUrl);break;case"resetIframe":this.resetIframe()}"{}"===JSON.stringify(t)&&this.checkMessage(e.data)&&(t=e.data),this.fireEvent("onMessage",t)}}},{key:"addEvent",value:function(e,t){"function"==typeof t&&(this.listeners[e]&&console.error("\u91CD\u590D\u6CE8\u518C\u4E8B\u4EF6"),this.listeners[e]=t)}},{key:"closeIframe",value:function(){this.iframeObj&&this.iframeObj.iframe&&(this.removeListener(),this.iframeObj.target.removeChild(this.iframeObj.iframe),this.iframeObj.iframe=null,this.iframeObj.iframeUrl=null,this.iframeObj.target=null,this.iframeObj.iframeUUID="",this.bakStyle={originalIframeWidth:0,originalIframeHeight:0,bakOriginalIframeWidth:!1})}},{key:"resetIframe",value:function(){this.bakStyle.bakOriginalIframeWidth&&(this.iframeObj.iframe.width=String(this.bakStyle.originalIframeWidth),this.iframeObj.iframe.height=String(this.bakStyle.originalIframeHeight))}}]),e}();window.MiniLoginEmbedder||(window.MiniLoginEmbedder=x);var N={set:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=["".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t))];if(m(i.expires,Date))n.push("expires=".concat(i.expires.toUTCString()));else if("number"==typeof i.expires){var r=new Date;r.setTime(r.getTime()+864e5*i.expires),n.push("expires=".concat(r.toUTCString()))}i.path&&n.push("path=".concat(i.path)),i.domain&&n.push("domain=".concat(i.domain)),i.secure&&n.push("secure"),i.sameSite&&n.push("samesite=".concat(i.sameSite));var a=n.join("; ");return document.cookie=a,a},get:function(e){var t=encodeURIComponent(e)+"=",i=document.cookie.split("; "),n=!0,r=!1,a=void 0;try{for(var o,c=i[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var s=o.value;if(s.startsWith(t))return decodeURIComponent(s.substring(t.length))}}catch(e){r=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}}},M=encodeURIComponent("https://login.taobao.com/jump?target="+encodeURIComponent("https://login.1688.com/member/pop_signin_route.htm?from="+encodeURIComponent(window.location.href))),A=encodeURIComponent("http://member.1688.com/member/join/enterprise_join.htm"),H=new x({targetId:"alibaba-login-iframe",appName:"taobao",appEntrance:"default",styleType:"vertical",iframeUrl:"https://login.taobao.com/member/login.jhtml",lang:"zh_cn",iframeWidth:762,iframeHeight:458,isMobile:!1,queryStr:"&from=b2b_pop_new&style=b2b&newMini2=true&full_redirect=false&reg=".concat(A,"&redirectURL=").concat(M)}),D=function(){return new Promise(function(e){try{H.checkThirdPartyCookie().then(function(t){t&&!1===t.banThirdPartyCookie?e([!0]):e([!1,"3cookie"])}).catch(function(t){e([!1,"promise-catch"])})}catch(t){e([!1,"unknown-err"])}})};function W(e,t,i){var n=window.goldlog;"object"==typeof i&&(i=Object.entries(i).map(function(e){var t=(0,a._)(e,2),i=t[0],n=t[1];return"".concat(i,"=").concat(n)}).join("&")),n&&n.record&&n.record(e,t,i)}var J="1688_pc_login_redirect",B=(n=(0,l._)(function(){var e,t;return(0,f.Jh)(this,function(i){switch(i.label){case 0:if(!(null!==(e=localStorage.getItem(J))))return[3,5];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,D()];case 2:return a._.apply(void 0,[i.sent(),1])[0]&&(null!==(t=window.__flow_sdk__)&&void 0!==t?t:window.__flow_sdk__=[]).push(JSON.parse(e)),[3,4];case 3:return i.sent(),[3,4];case 4:localStorage.removeItem(J),i.label=5;case 5:return[2]}})}),function(){return n.apply(this,arguments)});i(3265);var z="nomal",F=function(){window.location.reload()},q=F,K=0,Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"no-scene",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.href,i=new Date().getTime(),n=t.includes("?")?"".concat(t,"&pcLoginAbJumpBeforeTimeStr=").concat(i):"".concat(t,"?pcLoginAbJumpBeforeTimeStr=").concat(i),r="https://login.1688.com/member/signin.htm?done=".concat(encodeURIComponent(n));window.open(r,"_blank"),W("/1668_pc.pc_login_ab.jump_before","EXP",{timeStr:new Date().getTime(),spm:e})},V={init:(r=(0,l._)(function(e,t,i){var n,r,o;return(0,f.Jh)(this,function(c){switch(c.label){case 0:return console.log("\u5F53\u524D\u767B\u5F55\u5F39\u7A97\u4E3A 0.1.6 \u7248\u672C"),[4,D()];case 1:if(r=(n=a._.apply(void 0,[c.sent(),2]))[0],o=n[1],!r)return V.triggerFlowAction("page"),Y(e,i),W("/1668_pc.pc_login_ab.modal_turn_jump","OTHER",{reason:o,spm:e}),[2];return e&&(z=e),t&&"function"==typeof t&&(q=t),W("/1668_pc.pc_login_modal.openclk","CLK","scene=".concat(z,"&visitid=").concat(N.get("cna"),"&timestr=").concat(Date.now())),document.body.insertAdjacentHTML("afterbegin",'<div id="pc-login-modal"><div id="alibaba-login-iframe"><div id="alibaba-login-iframe-loading"></div><div id="alibaba-login-iframe-close"></div></div></div>'),H.init(),V.loginSuccess(),V.addClickEvent(),[2]}})}),function(e,t,i){return r.apply(this,arguments)}),remove:function(){var e=document.getElementById("pc-login-modal"),t=document.getElementById("alibaba-login-iframe-close");e&&e.remove(),H.closeIframe(),t.removeEventListener("click",V.remove)},triggerFlowAction:function(e){try{localStorage.setItem(J,JSON.stringify({way:e,scene:z,withLoad:q===F}))}catch(e){}},loginSuccess:function(){H.addEvent("onMessage",function(e){e&&e.action&&"afterInit"===e.action&&0===K&&(K++,W("/1668_pc.pc_login_modal.show","EXP","scene=".concat(z,"&visitid=").concat(N.get("cna"),"&timestr=").concat(Date.now()))),"_sys_pop_login_success_cb_20141106"===e&&(V.remove(),V.syncCookie())})},syncCookie:function(){var e={expires:7,path:"/",domain:"1688.com",secure:!0,sameSite:"None"};(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"callback",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return new Promise(function(n,r){var a="jsonp_callback_".concat(Math.random().toString(36).substr(2,5));window[a]=function(e){n(e),s()};var o=document.createElement("script"),c=setTimeout(function(){r(Error("JSONP request to ".concat(e," timed out"))),s()},i),s=function(){clearTimeout(c),document.head.removeChild(o),delete window[a]};o.onerror=function(){r(Error("JSONP request to ".concat(e," failed"))),s()};var l=-1===e.indexOf("?")?"?":"&";o.src="".concat(e).concat(l).concat(encodeURIComponent(t),"=").concat(a),document.head.appendChild(o)})})("https://login.1688.com/tbc").then(function(t){if(t){var i=t.__last_loginid__,n=t.__last_memberid__;i&&(N.set("__cn_logon__",!0,e),N.set("__cn_logon_id__",i,e),N.set("__last_loginid__",n,e)),n&&(N.set("__last_memberid__",n,e),N.set("last_mid",n,e)),W("/1668_pc.pc_login_modal.success","EXP","scene=".concat(z,"&visitid=").concat(N.get("cna"),"&timestr=").concat(Date.now(),"&loginid=").concat(i)),V.triggerFlowAction("modal"),q()}}).catch(function(e){console.error(e)})},addClickEvent:function(){var e=document.getElementById("alibaba-login-iframe-close");e&&e.addEventListener("click",V.remove)}},X={login:V.init,close:V.remove,checkCookie:H.checkThirdPartyCookie};function Z(e,t){return function(e){var t,i,n,r,a,o,c,s,l,f=function(e,t){return e<<t|e>>>32-t},m=function(e,t){var i,n,r,a,o;return(r=2147483648&e,a=2147483648&t,i=1073741824&e,n=1073741824&t,o=(1073741823&e)+(1073741823&t),i&n)?2147483648^o^r^a:i|n?1073741824&o?3221225472^o^r^a:1073741824^o^r^a:o^r^a},d=function(e,t,i,n,r,a,o){return e=m(e,m(m(t&i|~t&n,r),o)),m(f(e,a),t)},u=function(e,t,i,n,r,a,o){return e=m(e,m(m(t&n|i&~n,r),o)),m(f(e,a),t)},g=function(e,t,i,n,r,a,o){return e=m(e,m(m(t^i^n,r),o)),m(f(e,a),t)},h=function(e,t,i,n,r,a,o){return e=m(e,m(m(i^(t|~n),r),o)),m(f(e,a),t)},p=function(e){var t,i="",n="";for(t=0;t<=3;t++)i+=(n="0"+(e>>>8*t&255).toString(16)).substr(n.length-2,2);return i},v=[];for(t=0,v=function(e){for(var t,i=e.length,n=i+8,r=((n-n%64)/64+1)*16,a=Array(r-1),o=0,c=0;c<i;)t=(c-c%4)/4,o=c%4*8,a[t]=a[t]|e.charCodeAt(c)<<o,c++;return t=(c-c%4)/4,o=c%4*8,a[t]=a[t]|128<<o,a[r-2]=i<<3,a[r-1]=i>>>29,a}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?t+=String.fromCharCode(n>>6|192)+String.fromCharCode(63&n|128):t+=String.fromCharCode(n>>12|224)+String.fromCharCode(n>>6&63|128)+String.fromCharCode(63&n|128)}return t}(e)),o=1732584193,c=4023233417,s=2562383102,l=271733878;t<v.length;t+=16)i=o,n=c,r=s,a=l,o=d(o,c,s,l,v[t+0],7,3614090360),l=d(l,o,c,s,v[t+1],12,3905402710),s=d(s,l,o,c,v[t+2],17,606105819),c=d(c,s,l,o,v[t+3],22,3250441966),o=d(o,c,s,l,v[t+4],7,4118548399),l=d(l,o,c,s,v[t+5],12,1200080426),s=d(s,l,o,c,v[t+6],17,2821735955),c=d(c,s,l,o,v[t+7],22,4249261313),o=d(o,c,s,l,v[t+8],7,1770035416),l=d(l,o,c,s,v[t+9],12,2336552879),s=d(s,l,o,c,v[t+10],17,4294925233),c=d(c,s,l,o,v[t+11],22,2304563134),o=d(o,c,s,l,v[t+12],7,1804603682),l=d(l,o,c,s,v[t+13],12,4254626195),s=d(s,l,o,c,v[t+14],17,2792965006),c=d(c,s,l,o,v[t+15],22,1236535329),o=u(o,c,s,l,v[t+1],5,4129170786),l=u(l,o,c,s,v[t+6],9,3225465664),s=u(s,l,o,c,v[t+11],14,643717713),c=u(c,s,l,o,v[t+0],20,3921069994),o=u(o,c,s,l,v[t+5],5,3593408605),l=u(l,o,c,s,v[t+10],9,38016083),s=u(s,l,o,c,v[t+15],14,3634488961),c=u(c,s,l,o,v[t+4],20,3889429448),o=u(o,c,s,l,v[t+9],5,568446438),l=u(l,o,c,s,v[t+14],9,3275163606),s=u(s,l,o,c,v[t+3],14,4107603335),c=u(c,s,l,o,v[t+8],20,1163531501),o=u(o,c,s,l,v[t+13],5,2850285829),l=u(l,o,c,s,v[t+2],9,4243563512),s=u(s,l,o,c,v[t+7],14,1735328473),c=u(c,s,l,o,v[t+12],20,2368359562),o=g(o,c,s,l,v[t+5],4,4294588738),l=g(l,o,c,s,v[t+8],11,2272392833),s=g(s,l,o,c,v[t+11],16,1839030562),c=g(c,s,l,o,v[t+14],23,4259657740),o=g(o,c,s,l,v[t+1],4,2763975236),l=g(l,o,c,s,v[t+4],11,1272893353),s=g(s,l,o,c,v[t+7],16,4139469664),c=g(c,s,l,o,v[t+10],23,3200236656),o=g(o,c,s,l,v[t+13],4,681279174),l=g(l,o,c,s,v[t+0],11,3936430074),s=g(s,l,o,c,v[t+3],16,3572445317),c=g(c,s,l,o,v[t+6],23,76029189),o=g(o,c,s,l,v[t+9],4,3654602809),l=g(l,o,c,s,v[t+12],11,3873151461),s=g(s,l,o,c,v[t+15],16,530742520),c=g(c,s,l,o,v[t+2],23,3299628645),o=h(o,c,s,l,v[t+0],6,4096336452),l=h(l,o,c,s,v[t+7],10,1126891415),s=h(s,l,o,c,v[t+14],15,2878612391),c=h(c,s,l,o,v[t+5],21,4237533241),o=h(o,c,s,l,v[t+12],6,1700485571),l=h(l,o,c,s,v[t+3],10,2399980690),s=h(s,l,o,c,v[t+10],15,4293915773),c=h(c,s,l,o,v[t+1],21,2240044497),o=h(o,c,s,l,v[t+8],6,1873313359),l=h(l,o,c,s,v[t+15],10,4264355552),s=h(s,l,o,c,v[t+6],15,2734768916),c=h(c,s,l,o,v[t+13],21,1309151649),o=h(o,c,s,l,v[t+4],6,4149444226),l=h(l,o,c,s,v[t+11],10,3174756917),s=h(s,l,o,c,v[t+2],15,718787259),c=h(c,s,l,o,v[t+9],21,3951481745),o=m(o,i),c=m(c,n),s=m(s,r),l=m(l,a);return(p(o)+p(c)+p(s)+p(l)).toLowerCase()}(e+"&"+JSON.stringify(t))}function G(){var e=function(e){r(!1);var t,i=Date.now(),n={type:"login-page-iframe",isLogin:e},a=Z(i,n);null===(t=window.parent)||void 0===t||t.postMessage({d:i,sign:a,data:n},l.current)},t=function(e){var t=e.data;t&&t.d&&t.sign&&t.data&&Z(t.d,t.data)===t.sign&&"login-page-iframe-link"===(t.data||{}).type&&(r(!0),l.current=e.origin)},i=(0,a._)((0,s.useState)(!1),2),n=i[0],r=i[1],l=(0,s.useRef)("");return(0,s.useEffect)(function(){return window.addEventListener("message",t),function(){return window.removeEventListener("message",t)}},[]),(0,s.useEffect)(function(){n&&l.current&&X.login("a2639h.28947355.44251755.0",function(){e(!0)})},[n]),(0,s.useEffect)(function(){document.addEventListener("click",function(t){var i;t.target&&(null==t?void 0:null===(i=t.target)||void 0===i?void 0:i.id)==="alibaba-login-iframe-close"&&e(!1)})},[]),(0,o.tZ)(c.Fragment,{})}void 0===window.PcLoginModal&&(window.PcLoginModal=X),B()}}]);